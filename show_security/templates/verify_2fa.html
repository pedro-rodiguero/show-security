{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Verificação de Dois Fatores (2FA)</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: sans-serif;
        overflow: hidden; /* Evita barras de rolagem */
      }
      .container {
        display: flex;
        width: 100vw;
        height: 100vh;
      }
      .left-pane {
        flex: 1;
        position: relative;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #111; /* Cor de fundo caso o vídeo não carregue */
      }
      .video-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      .video-background iframe {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: none;
      }
      .logo {
        position: relative;
        z-index: 2;
        max-width: 250px;
        opacity: 0.9;
      }
      .right-pane {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 40px;
        box-sizing: border-box;
      }
      .login-form {
        width: 100%;
        max-width: 350px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .login-form input {
        padding: 8px;
        font-size: 1rem;
        text-align: center;
      }
      .login-form button {
        padding: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 1rem;
      }
      .messages {
        list-style: none;
        padding: 0;
        width: 100%;
        max-width: 350px;
        margin-bottom: 20px;
      }
      .messages li.error {
        color: red;
        background-color: #fdd;
        padding: 10px;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="left-pane">
        <div class="video-background">
          <iframe
            src="https://www.youtube-nocookie.com/embed/hUMhJ0m5fEs?autoplay=1&mute=1&loop=1&playlist=hUMhJ0m5fEs&controls=0&showinfo=0&modestbranding=1"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
          ></iframe>
        </div>
        <img
          src="{% static 'assets/loqedsystems_logo.jpeg' %}"
          alt="Logo"
          class="logo"
        />
      </div>
      <div class="right-pane">
        <h1>Verificação de Dois Fatores</h1>
        <p>Insira o código do seu aplicativo autenticador.</p>

        {% if messages %}
        <ul class="messages">
          {% for message in messages %}
          <li class="{{ message.tags }}">{{ message }}</li>
          {% endfor %}
        </ul>
        {% endif %}

        <form method="post" class="login-form">
          {% csrf_token %}
          <label for="token">Código de Verificação:</label>
          <input
            type="text"
            id="token"
            name="token"
            required
            maxlength="6"
            pattern="\d{6}"
            title="O código deve ter 6 dígitos."
            autocomplete="one-time-code"
          />

          <button type="submit">Verificar</button>
        </form>
      </div>
    </div>
  </body>
</html>
